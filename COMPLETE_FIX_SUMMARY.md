# ‚úÖ –ü–û–õ–ù–û–ï –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –¶–ï–ù–û–ô

## üéØ –ì–ª–∞–≤–Ω–∞—è –ü—Ä–æ–±–ª–µ–º–∞

**–¶–µ–Ω–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤**

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ü—Ä–∏—á–∏–Ω—ã

### 1. –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ –≥—Ä—É–ø–ø
- –í –ª–æ–≥–∞—Ö: `variationGroups: [form, sort, weight]`
- –ò–Ω–¥–µ–∫—Å—ã –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª–∏ —Å –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–ª –∏–Ω–¥–µ–∫—Å 0, —Å–∏—Å—Ç–µ–º–∞ –¥—É–º–∞–ª–∞ —á—Ç–æ —ç—Ç–æ –æ–¥–∏–Ω –∞—Ç—Ä–∏–±—É—Ç, –∞ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —ç—Ç–æ –±—ã–ª –¥—Ä—É–≥–æ–π

### 2. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É
- –í –ë–î: `"–ø–æ—Ä–æ—à–æ–∫"` (–º–∞–ª–µ–Ω—å–∫–∏–º–∏)
- –í –æ–ø—Ü–∏—è—Ö: `"–ü–æ—Ä–æ—à–æ–∫"` (—Å –±–æ–ª—å—à–æ–π)
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–æ —Ä–µ–≥–∏—Å—Ç—Ä

### 3. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- –ù–µ –±—ã–ª–æ —Ñ–æ—Ä–º—ã "–ë–µ–∑ –æ–±—Ä–æ–±–∫–∏"
- –î—É–±–ª–∏–∫–∞—Ç—ã: "2—Å–æ—Ä—Ç" –∏ "2 —Å–æ—Ä—Ç", "50–≥—Ä–∞–º" –∏ "50 –≥—Ä–∞–º"

### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —É–¥–∞–ª—è–ª–∞—Å—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å —Å—Ç–∞—Ä–∞—è `dikoros.db` –≤–º–µ—Å—Ç–æ `shop.db`

## ‚úÖ –ü–æ–ª–Ω–æ–µ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `services/database.ts`

**–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≥—Ä—É–ø–ø:**
```typescript
// –í–°–ï–ì–î–ê –≤ —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ: sort ‚Üí form ‚Üí weight ‚Üí year
if (p.availableOptions.sort.size > 0) {
    groupsDef.push({ id: 'sort', title: '–°–æ—Ä—Ç', ... });
}
if (p.availableOptions.form.size > 0) {
    groupsDef.push({ id: 'form', title: '–§–æ—Ä–º–∞ –ø—Ä–æ–¥—É–∫—Ç—É', ... });
}
if (p.availableOptions.weight.size > 0) {
    groupsDef.push({ id: 'weight', title: '–§–∞—Å—É–≤–∞–Ω–Ω—è', ... });
}
```

**–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:**
- "2—Å–æ—Ä—Ç" ‚Üí "2 —Å–æ—Ä—Ç"
- "50–≥—Ä–∞–º" ‚Üí "50 –≥—Ä–∞–º"
- –§–æ—Ä–º–∞ "–ë–µ–∑ –æ–±—Ä–æ–±–∫–∏" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `shop.db` —Å 348 —Ç–æ–≤–∞—Ä–∞–º–∏
- –ù–µ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `app/product/[id].tsx`

**–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏:**
```typescript
const normalizedSelected = String(selectedValue).toLowerCase().trim();
const normalizedVariant = String(variantValue || '').toLowerCase().trim();

if (normalizedVariant !== normalizedSelected) {
    matches = false;
}
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤:**
```typescript
const indexToAttrId: { [key: number]: string } = {};
product.variationGroups.forEach((group: any, idx: number) => {
    indexToAttrId[idx] = group.id;
});
```

## üöÄ –ß—Ç–æ –ù—É–∂–Ω–æ –°–¥–µ–ª–∞—Ç—å

**–ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–ï** - –≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Ü–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏:
- ‚úÖ –í—ã–±–æ—Ä–µ —Å–æ—Ä—Ç–∞
- ‚úÖ –í—ã–±–æ—Ä–µ —Ñ–æ—Ä–º—ã
- ‚úÖ –í—ã–±–æ—Ä–µ –≤–µ—Å–∞
- ‚úÖ –õ—é–±–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 348 —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π!
